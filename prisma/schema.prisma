datasource db {
  provider = "postgresql" // or your DB provider
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model DistributionCenter {
  id        Int       @id @default(autoincrement())
  name      String
  latitude  Float
  longitude Float

  products  Product[]      @relation("ProductDistributionCenter")
  inventory InventoryItem[]
}

model User {
  id             Int       @id @default(autoincrement())
  first_name     String
  last_name      String
  email          String    @unique
  age            Int?
  gender         String
  state          String
  street_address String
  postal_code    String
  city           String
  country        String
  latitude       Float
  longitude      Float
  traffic_source String
  created_at     DateTime  @default(now())

  orders         Order[]
  orderItems     OrderItem[]
}

model Product {
  id                   Int                @id @default(autoincrement())
  cost                 Float
  category             String
  name                 String
  brand                String
  retail_price         Float
  department           String
  sku                  String
  distributionCenterId Int?

  distributionCenter   DistributionCenter? @relation("ProductDistributionCenter", fields: [distributionCenterId], references: [id])
  inventoryItems       InventoryItem[]
  orderItems           OrderItem[]
}

model InventoryItem {
  id                    Int       @id @default(autoincrement())
  product_id            Int
  created_at            DateTime
  sold_at               DateTime?
  cost                  Float
  product_category      String
  product_name          String
  product_brand         String
  product_retail_price  Float
  product_department    String
  product_sku           String
  product_distribution_center_id Int?

  product               Product?             @relation(fields: [product_id], references: [id])
  distributionCenter    DistributionCenter?  @relation(fields: [product_distribution_center_id], references: [id])
  orderItems            OrderItem[]
}

model Order {
  order_id      Int         @id @default(autoincrement())
  user_id       Int
  status        String
  gender        String
  created_at    DateTime
  returned_at   DateTime?
  shipped_at    DateTime?
  delivered_at  DateTime?
  num_of_item   Int

  user          User        @relation(fields: [user_id], references: [id])
  orderItems    OrderItem[]
}

model OrderItem {
  id             Int       @id @default(autoincrement())
  order_id       Int
  user_id        Int
  product_id     Int
  inventory_item_id Int
  status         String
  created_at     DateTime
  shipped_at     DateTime?
  delivered_at   DateTime?
  returned_at    DateTime?
  sale_price     Float

  order          Order      @relation(fields: [order_id], references: [order_id])
  user           User       @relation(fields: [user_id], references: [id])
  product        Product    @relation(fields: [product_id], references: [id])
  inventoryItem  InventoryItem @relation(fields: [inventory_item_id], references: [id])
}
